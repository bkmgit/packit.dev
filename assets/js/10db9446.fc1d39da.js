"use strict";(self.webpackChunkpackit_dev=self.webpackChunkpackit_dev||[]).push([[8823],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>f});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),p=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=p(r),d=a,f=c["".concat(l,".").concat(d)]||c[d]||m[d]||o;return r?n.createElement(f,i(i({ref:t},u),{},{components:r})):n.createElement(f,i({ref:t},u))}));function f(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:a,i[1]=s;for(var p=2;p<o;p++)i[p]=r[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},62566:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var n=r(87462),a=(r(67294),r(3905));const o={title:"Pull from upstream",sidebar_position:1},i="job: pull_from_upstream",s={unversionedId:"configuration/downstream/pull_from_upstream",id:"configuration/downstream/pull_from_upstream",title:"Pull from upstream",description:"A dist-git only job that opens a new dist-git pull request in",source:"@site/docs/configuration/downstream/pull_from_upstream.md",sourceDirName:"configuration/downstream",slug:"/configuration/downstream/pull_from_upstream",permalink:"/docs/configuration/downstream/pull_from_upstream",draft:!1,editUrl:"https://github.com/packit/packit.dev/tree/main/docs/configuration/downstream/pull_from_upstream.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Pull from upstream",sidebar_position:1},sidebar:"autogenerated",previous:{title:"Downstream jobs",permalink:"/docs/category/downstream-jobs"},next:{title:"Koji builds",permalink:"/docs/configuration/downstream/koji_build"}},l={},p=[{value:"Requirements",id:"requirements",level:2},{value:"Supported triggers",id:"supported-triggers",level:2},{value:"Optional parameters",id:"optional-parameters",level:2},{value:"Example",id:"example",level:2}],u={toc:p},c="wrapper";function m(e){let{components:t,...r}=e;return(0,a.kt)(c,(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"job-pull_from_upstream"},(0,a.kt)("inlineCode",{parentName:"h1"},"job: pull_from_upstream")),(0,a.kt)("p",null,"A dist-git only job that opens a new dist-git pull request in\nsrc.fedoraproject.org when a new upstream release happens using a notification\nfrom ",(0,a.kt)("a",{parentName:"p",href:"https://release-monitoring.org/"},"release-monitoring.org"),"."),(0,a.kt)("p",null,"This job utilizes the same logic as ",(0,a.kt)("inlineCode",{parentName:"p"},"propose_downstream")," with the only\nexception that it is defined and executed in dist-git."),(0,a.kt)("p",null,"Use ",(0,a.kt)("a",{parentName:"p",href:"/docs/configuration#issue_repository"},(0,a.kt)("inlineCode",{parentName:"a"},"issue_repository"))," option to get information about\npossible failures during the update process."),(0,a.kt)("h2",{id:"requirements"},"Requirements"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The job is defined in a Packit config in the default branch of the dist-git\nrepository (",(0,a.kt)("inlineCode",{parentName:"li"},"rawhide"),"). Packit configs on other branches are ignored."),(0,a.kt)("li",{parentName:"ul"},"Upstream release monitoring is active for the package. ",(0,a.kt)("a",{parentName:"li",href:"https://docs.fedoraproject.org/en-US/package-maintainers/Upstream_Release_Monitoring/"},"The monitoring\nstatus"),"\nin dist-git should be set to ",(0,a.kt)("inlineCode",{parentName:"li"},"Monitoring"),")."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/configuration#upstream_project_url"},(0,a.kt)("inlineCode",{parentName:"a"},"upstream_project_url"))," is defined in the configuration.")),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Upstreams (defined in ",(0,a.kt)("inlineCode",{parentName:"p"},"upstream_project_url"),") hosted in these Git forges are currently supported:"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com"},"https://github.com")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://gitlab.com"},"https://gitlab.com")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://gitlab.freedesktop.org"},"https://gitlab.freedesktop.org")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://gitlab.gnome.org"},"https://gitlab.gnome.org")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://salsa.debian.org"},"https://salsa.debian.org"))),(0,a.kt)("p",{parentName:"admonition"},"Support for working with upstreams in all Git forges is planned to be\nworked on shortly (",(0,a.kt)("a",{parentName:"p",href:"https://github.com/packit/packit-service/issues/1907"},"see"),").")),(0,a.kt)("h2",{id:"supported-triggers"},"Supported triggers"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"release"))),(0,a.kt)("h2",{id:"optional-parameters"},"Optional parameters"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"dist_git_branches")," - a (list of) branch(es) in dist-git where packit should work (defaults to ",(0,a.kt)("inlineCode",{parentName:"li"},"main"),").\nYou can also use the ",(0,a.kt)("a",{parentName:"li",href:"/docs/configuration#aliases"},"aliases provided by Packit"),"\nto not need to change the config file when the new system version is released.")),(0,a.kt)("h2",{id:"example"},"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"upstream_project_url: https://github.com/packit/packit\n...\njobs:\n- job: pull_from_upstream\n  trigger: release\n  dist_git_branches:\n    - fedora-all\n    - epel-9\n")),(0,a.kt)("p",null,"Once a new upstream release happens, Packit will open a pull request with it in\nall active Fedora releases and EPEL 9."),(0,a.kt)("p",null,"If you need to do any change in the pull request, you need to locally fetch the source branch\nof the Packit's pull request and push it (with a fix) to your fork (as it is not possible to push to the branch\ncreated in the Packit's fork):"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"git fetch https://src.fedoraproject.org/forks/packit/rpms/$YOUR_PACKAGE.git refs/heads/*:refs/remotes/packit/*\ngit cherry-pick packit/$VERSION-$BRANCH-update-pull_from_upstream\n")),(0,a.kt)("p",null,"For more details, check ",(0,a.kt)("a",{parentName:"p",href:"/docs/fedora-releases-guide"},"our release guide"),"."))}m.isMDXComponent=!0}}]);